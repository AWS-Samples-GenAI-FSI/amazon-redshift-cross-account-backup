name: Basic Validation

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    
    - name: Test Python files
      run: |
        echo "Testing Python syntax..."
        python -m py_compile scripts/native_snapshot_demo.py
        python -m py_compile scripts/aws_backup_demo.py
        python -m py_compile lambda/aca_redshift_backup_lambda.py
        echo "Python files are valid"
    
    - name: Test JSON files
      run: |
        echo "Testing JSON syntax..."
        python -m json.tool config/demo-config.json > /dev/null
        echo "JSON files are valid"
    
    - name: Test shell scripts
      run: |
        echo "Testing shell scripts..."
        bash -n quick-deploy.sh
        bash -n cleanup.sh
        bash -n demo-runner.sh
        bash -n deploy-lambda-backup.sh
        echo "Shell scripts are valid"
    
    - name: Check repository structure
      run: |
        echo "Repository files:"
        ls -la
        echo "CloudFormation templates:"
        ls -la cloudformation/
        echo "Documentation:"
        ls -la docs/
        echo "Validation completed successfully"